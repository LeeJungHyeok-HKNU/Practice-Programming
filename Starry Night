#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#include <windows.h>

/*

	Starry night.
	2020-06-11
	lee junghyeok

*/

//iterable 
int i;
int j;
int k;
int l;

//variable
int x1;
int x2;
int xG;


//random variable
int r1;
int r2;

//type of star
int type;

//functions to print
void printSpace(int x);
int printGalaxy(int width);
void printMoon(int x);
void printMoonG(int x);

//type of universe 
void universeNormal();
void universeGalaxy();

int galaxyWave(int width);

int main()
{
	srand(time(NULL));
	universeNormal();
}

void printSpace(int x)
{
	int it;
	for(it=0;it<x;it++)
	{
		printf(" ");
	}
}

void printMoon(int x)
{
	for(i=0;i<5;i++)
	{
		if(i<3)
		{
			printSpace(x-i);
			for(j=0;j<=i;j++)
			{
				printf("��");
			}
			printf("\n");
		}
		else
		{
			printSpace(x-(4-i));
			for(j=0;j<5-i;j++)
			{
				printf("��");
			}
			printf("\n");
		}
	}
}

void printMoonG(int x, int xg)
{
	for(i=0;i<5;i++)
	{
		if(i<3)
		{
			printSpace(x-i);
			for(j=0;j<=i;j++)
			{
				printf("��");
			}
			for(j=0;j<(xg - x); j++)
			{
				printf("*");
			}
			printf("\n");
		}
		else
		{
			printSpace(x-(4-i));
			for(j=0;j<5-i;j++)
			{
				printf("��");
			}
			for(j=0;j<(xg - x); j++)
			{
				printf("*");
			}
			printf("\n");
		}
		if(rand()%2 == 0)
			xg--;
		else
			xg++;
	}
}

void universeNormal()
{
	while(1)
	{
		type = rand()%1000;
		if(type>0 and type<=5)
			type = 1;
		if(type>5 and type<=15)
			type = 2;
		if(type>15 and type<=20)
			type = 3;
		if(type>20 and type<=25)
			type = 5;
		if(type>25 and type<=300)
			type = 4;
		if(type>300 and type<=600)
			type = 6;
		if(type>600 and type<=601)
		{
			printf("Oh! There is a Galaxy\n");
			Sleep(500);
			printf(".\n");
			Sleep(500);
			printf("..\n");
			Sleep(500);
			printf("...\n");
			universeGalaxy();
		}
		switch(type)
		{
			case 0:
			{
				x2 = rand()%150;
				printMoon(x2);
				break;
			}
			case 1:
			{
				x1 = rand()%235;
				printSpace(x1);
				printf("o\n");
				break;
			}
			case 2:
			{
				x1 = rand()%235;
				printSpace(x1);
				printf("��\n");
				break;
			}
			case 3:
			{
				x1 = rand()%235;
				printSpace(x1);
				printf("��\n");
				break;
			}
			case 4:
			{
				x1 = rand()%235;
				printSpace(x1);
				printf("*\n");
				break;
			}
			case 5:
			{
				x1 = rand()%235;
				printSpace(x1);
				printf("��\n");
				break;
			}
			case 6:
			{
				x1 = rand()%5;
				for(i=0;i<x1;i++)
				{
					printf("\n");
				}
				break;
			}
			default:
			{
				x1 = rand()%235;
				printSpace(x1);
				printf("'\n");
				break;
			}
		}
		Sleep(10);
	}
}

void universeGalaxy()
{
	xG = rand()%185;
	int galaxyWidth = rand()%80 + 10;
	while(1)
	{
		printSpace(xG);
		printGalaxy(galaxyWidth);
		Sleep(0);
		if(galaxyWave(galaxyWidth) == 1)
			galaxyWidth --;
		r2 = rand()%1000;
		if(r2 == 0)
			break;
	}
}

int printGalaxy(int width)
{
	bool done = false;
	char star;
	for(k=0;k<width;k++)
	{
		x2 = rand()%9;
		switch(x2)
		{
			case 0:{
				star = '*';
				break;
			}
			case 1:{
				star = '*';
				break;
			}
			case 2:{
				star = '*';
				break;
			}
			case 3:{
				star = '*';
				break;
			}
			case 4:{
				star = '*';
				break;
			}
			case 5:{
				star = 'o';
				break;
			}
			case 6:{
				star = '.';
				break;
			}
			case 7:{
				star = ';';
				break;
			}
			case 8:{
				star = '*';
				break;
			}
		}
			
		printf("%c", star);
		
		r1 = rand()%3;
		printSpace(r1);
	}
	printf("\n");
	return 1;
}

int galaxyWave(int width)
{
	x2 = rand()%3 + 1;
	
	if (rand()%2 == 0)
		xG+= x2;
	else
		xG-= x2;
	
	if (xG<0)
		xG = 0;
	
	if(xG + width * 2 > 237)
		return 1;
	
	return 0;
}
